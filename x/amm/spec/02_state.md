<!--
order: 2
-->

# State

## Pool

```go
type Pool struct {
	Address    string
	Id         uint64
	PoolParams PoolParams
	// This string specifies who will govern the pool in the future.
	// Valid forms of this are:
	// {token name},{duration}
	// {duration}
	// where {token name} if specified is the token which determines the
	// governor, and if not specified is the LP token for this pool.duration is
	// a time specified as 0w,1w,2w, etc. which specifies how long the token
	// would need to be locked up to count in governance. 0w means no lockup.
	FuturePoolGovernor string
	// sum of all LP tokens sent out
	TotalShares sdk.Coin
	// These are assumed to be sorted by denomiation.
	// They contain the pool asset and the information about the weight
	PoolAssets []PoolAsset
	// sum of all non-normalized pool weights
	TotalWeight sdk.Int
}
```

`Pool` consists of the info about liquidity pools.
Each liquidity pool has accounts for `liquidity`, `fee` and `weight_recovery`.

## SmoothWeightChangeParams

```go
type SmoothWeightChangeParams struct {
	// The start time for beginning the weight change.
	// If a parameter change / pool instantiation leaves this blank,
	// it should be generated by the state_machine as the current time.
	StartTime time.Time
	// Duration for the weights to change over
	Duration time.Duration
	// The initial pool weights. These are copied from the pool's settings
	// at the time of weight change instantiation.
	// The amount PoolAsset.token.amount field is ignored if present,
	// future type refactorings should just have a type with the denom & weight
	// here.
	InitialPoolWeights []PoolAsset
	// The target pool weights. The pool weights will change linearly with respect
	// to time between start_time, and start_time + duration. The amount
	// PoolAsset.token.amount field is ignored if present, future type
	// refactorings should just have a type with the denom & weight here.
	TargetPoolWeights []PoolAsset
}

type PoolAsset struct {
	// Coins we are talking about,
	// the denomination must be unique amongst all PoolAssets for this pool.
	Token sdk.Coin
	// Weight that is not normalized. This weight must be less than 2^50
	Weight sdk.Int
}
```

`SmoothWeightChangeParams` is only valid for normal AMM pool where `UseOracle` is set to false.

## PoolParams

- `UseOracle` is set to true when the weights are dynamically calculated based on oracle.
- `ExternalLiquidityRatio` is configured from external liquidity fetcher oracle
- `WeightBreakingFeeMutliplier` is the parameter used to calculate weight breaking fee from weight break attribute.
- `LpFeePortion` is the fee portion to be given to liquidity providers.
- `StakingFeePortion` is the fee portion to be spent to stakeholders.
- `WeightRecoveryFeePortion` is the fee portion to be spent on weight recovery.
- `ThresholdWeightDiff` is the threshold weight difference from target weight when weight recovery treasury spending is enabled.

```go
type PoolParams struct {
	SwapFee                     sdk.Dec
	ExitFee                     sdk.Dec
	SmoothWeightChangeParams    *SmoothWeightChangeParams
	WeightBreakingFeeMutliplier sdk.Dec
    UseOracle                   bool
    ExternalLiquidityRatio      sdk.Dec
    LpFeePortion                sdk.Dec
    StakingFeePortion           sdk.Dec
    WeightRecoveryFeePortion    sdk.Dec
    ThresholdWeightDiff         sdk.Dec
}
```
